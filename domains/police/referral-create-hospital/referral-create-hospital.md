## 개요

의뢰서 작성 완료 후 의뢰서를 전송할 병원을 선택하는 페이지입니다. 여러 병원에 일괄 전송하거나 특정 병원만 선택하여 전송할 수 있습니다.

---

## 화면 구성 요소

### 상단 헤더 영역

- **뒤로가기 버튼**: 의뢰서 작성 페이지로 돌아가기
- **페이지 제목**: "병원 선택"
- **진행 단계**: "2/2 단계" 표시

### 의뢰서 요약 영역

- **환자 기본정보**: 이름, 성별, 나이, 환자구분을 한 줄로 요약
- **의뢰서 확인**: "의뢰서 확인" 버튼으로 작성된 내용 재확인 가능

### 필터 및 정렬 영역

- **야간병원 필터**: 토글 스위치
    - 라벨: "야간병원만 표시 (현재 시간 기준)"
    - 현재 시간이 18시~09시 사이면 자동 활성화
- **정렬 옵션**: 드롭다운 선택
    - 가용 병상 많은 순
    - 거리 가까운 순 (GPS 기반)
    - 이름순

### 병원 목록 영역

### 병원 카드 구성

- **선택 체크박스**: 좌측에 위치, 다중 선택 가능
- **병원 기본정보**:
    - 병원명: 굵은 글씨
    - 주소: 간략 주소
    - 거리: "1.2km" 형태로 표시
    - 연락처: 터치 시 전화 연결
- **야간진료 배지**: "야간진료 가능/불가능"
- **병상현황 표시**:
    - 환자구분에 해당하는 병상만 강조 표시
    - 예: 성인 환자인 경우 성인 병상을 크게 표시
    - 전체 병상 현황도 작은 글씨로 표시
- **상태 인디케이터**:
    - 초록색: 해당 병상 충분 (50% 이상)
    - 주황색: 해당 병상 부족 (1개 이상)
    - 빨간색: 해당 병상 없음

### 선택 요약 영역

- **선택된 병원 수**: "3개 병원 선택됨"
- **전체 선택/해제**: 체크박스 + "전체 선택"
- **선택된 병원 미리보기**: 선택된 병원명들을 간략히 표시

### 하단 액션 영역

- **이전 단계 버튼**: 의뢰서 작성으로 돌아가기
- **선택 전송 버튼**: 선택된 병원들에만 전송
- **전체 전송 버튼**: 모든 병원에 일괄 전송 (주요 액션)

---

## 기능 명세

### 병원 데이터 처리

- **실시간 병상현황**: 최신 데이터로 자동 업데이트
- **거리 계산**: GPS 기반 현재 위치에서 병원까지 거리
- **환자구분 매칭**: 작성된 의뢰서의 환자구분에 맞는 병상 우선 표시

### 선택 관리

- **다중 선택**: 체크박스로 여러 병원 동시 선택
- **전체 선택/해제**: 한 번에 모든 병원 선택/해제
- **선택 상태 유지**: 필터 변경 시에도 선택 상태 유지
- **최소 선택 검증**: 최소 1개 병원은 선택해야 전송 가능

### 필터링 및 정렬

- **야간병원 필터**: 현재 시간 기준 자동 활성화
- **실시간 정렬**: 선택한 정렬 옵션에 따라 즉시 재정렬
- **스마트 추천**: 환자구분에 맞는 병상이 있는 병원 우선 표시

### 전송 처리

- **선택 전송**: 체크된 병원들에만 의뢰서 전송
- **전체 전송**: 필터 조건에 맞는 모든 병원에 전송
- **전송 확인**: 전송 전 최종 확인 다이얼로그
- **전송 완료**: 결과 페이지로 이동